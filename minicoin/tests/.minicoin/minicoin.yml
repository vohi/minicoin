settings:
  # reset everything
  defaults: ~

  /test.*/:
    shared_folders:
      - $PWD: /minicoin
      - $HOME_SHARE: $GUEST_HOMES/tester

jobconfigs: &testconfigs
  - job: test
    name: simple
    options:
      param1: value1
      param2: value2
      flag:

  - job: test
    name: complicated
    options:
      array1:
        - entry1
        - entry2
      spacey: foo bar
      quoted: hello "world"

  - job: test
    name: colored
    options:
      param1: text
      param2: status
      param3: alert
      param4: warn
    matchers:
      - pattern: stdout 1
        options:
          color: yellow
      - pattern: stdout 2
        options:
          color: magenta
      - pattern: stdout 3
        options:
          color: cyan
      - pattern: --.*
        channel: detail
        options:
          color: blue
          bold: true
          new_line: false
      - pattern: ^\'.*\'$
        channel: detail
        options:
          color: blue
          bold: false
      - pattern: .*
        channel: detail
        options:
          color: white
          bold: false

roles: &mutagentest
  - role: mutagen
    paths:
      - ~/dev/minicoin/minicoin/tests
    options: --ignore-vcs
    ignores: "*-build"

machines:
  - ~ # remove default machines
  - name: empty
    box: testbox

  - name: test_linux
    box: generic/ubuntu2004
    jobconfigs: *testconfigs
  - name: test_mac
    box: tqtc/$minicoin_key/macos11
    jobconfigs: *testconfigs
  - name: test_windows
    box: tqtc/$minicoin_key/windows10
    jobconfigs: *testconfigs

  - name: test
    box: generic/ubuntu2004
    jobconfigs: *testconfigs
    roles: *mutagentest
  